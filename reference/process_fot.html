<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Facts Over Time – Processing — process_fot • ndq</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Facts Over Time – Processing — process_fot"><meta name="description" content="Intakes the output of check_fot in order to apply additional processing. This
includes applying a heuristic meant to compare the fact count in a given time period
to other time periods around it. For a monthly computation, for example, the heuristic
would be month / ((month-1 * .25) + (month+1 * .25) + (month-12 * .5)) which is
the value for a given month divided by the weighted average of the value in the previous
month, the next month, and the same month in the previous year. The function can also
optionally compute a ratio given a total_pt column (added by the user) to be used as a
denominator and a ratio_mult value to be used as a multiplier."><meta property="og:description" content="Intakes the output of check_fot in order to apply additional processing. This
includes applying a heuristic meant to compare the fact count in a given time period
to other time periods around it. For a monthly computation, for example, the heuristic
would be month / ((month-1 * .25) + (month+1 * .25) + (month-12 * .5)) which is
the value for a given month divided by the weighted average of the value in the previous
month, the next month, and the same month in the previous year. The function can also
optionally compute a ratio given a total_pt column (added by the user) to be used as a
denominator and a ratio_mult value to be used as a multiplier."><meta property="og:image" content="https://pedsnet.github.io/ndq/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/database_connection.html">Database Connection &amp; Environment Setup</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Facts Over Time – Processing</h1>
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/R/facts_over_time.R" class="external-link"><code>R/facts_over_time.R</code></a></small>
      <div class="d-none name"><code>process_fot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Intakes the output of check_fot in order to apply additional processing. This
includes applying a heuristic meant to compare the fact count in a given time period
to other time periods around it. For a monthly computation, for example, the heuristic
would be <code>month / ((month-1 * .25) + (month+1 * .25) + (month-12 * .5))</code> which is
the value for a given month divided by the weighted average of the value in the previous
month, the next month, and the same month in the previous year. The function can also
optionally compute a ratio given a <code>total_pt</code> column (added by the user) to be used as a
denominator and a <code>ratio_mult</code> value to be used as a multiplier.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">process_fot</span><span class="op">(</span></span>
<span>  <span class="va">fot_results</span>,</span>
<span>  target_col <span class="op">=</span> <span class="st">"row_cts"</span>,</span>
<span>  add_ratios <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ratio_mult <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  rslt_source <span class="op">=</span> <span class="st">"remote"</span>,</span>
<span>  csv_rslt_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fot-results">fot_results<a class="anchor" aria-label="anchor" href="#arg-fot-results"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>The tabular output of <code>check_fot</code>. This table should include results for all
institutions that should be included in the computation of overall / "network level"
statistics.</p></dd>


<dt id="arg-target-col">target_col<a class="anchor" aria-label="anchor" href="#arg-target-col"></a></dt>
<dd><p><em>string</em> || defaults to <code>row_cts</code></p>
<p>A string indicating the column in <code>fot_results</code> that should be used to
compute the primary heuristic. For the ratio computation, <code>row_pts</code> will
<em>always</em> be used regardless of what is specified in this parameter.</p></dd>


<dt id="arg-add-ratios">add_ratios<a class="anchor" aria-label="anchor" href="#arg-add-ratios"></a></dt>
<dd><p><em>boolean</em> || defaults to <code>FALSE</code></p>
<p>A boolean indicating whether incidence ratios / rates should be computed.
if TRUE, the user should edit the <code>fot_results</code> table to include an additional <code>total_pt</code>
column with counts for the denominator of the user's choosing. We recommend including
the desired denominator population as a check passed into the <code>check_fot</code> function
to facilitate the computation of patient counts for each time period.</p></dd>


<dt id="arg-ratio-mult">ratio_mult<a class="anchor" aria-label="anchor" href="#arg-ratio-mult"></a></dt>
<dd><p><em>integer</em> || defaults to <code>10,000</code></p>
<p>If <code>add_ratios</code> is set to  <code>TRUE</code>, this parameter should represent the numerical
multiplier that should be used to compute the incidence ratio. This will result in
a ratio that represents the fact rate per (<code>ratio_mult</code>) patients.</p></dd>


<dt id="arg-rslt-source">rslt_source<a class="anchor" aria-label="anchor" href="#arg-rslt-source"></a></dt>
<dd><p><em>string</em> || defaults to <code>remote</code></p>
<p>A string that identifies the location of the <code>fot_results</code> table.
Acceptable values are</p><ul><li><p><code>local</code> - table is stored as a dataframe in the local R environment</p></li>
<li><p><code>csv</code> - table is stored as a CSV file</p></li>
<li><p><code>remote</code> - table is stored on a remote database</p></li>
</ul></dd>


<dt id="arg-csv-rslt-path">csv_rslt_path<a class="anchor" aria-label="anchor" href="#arg-csv-rslt-path"></a></dt>
<dd><p><em>string</em> || defaults to <code>NULL</code></p>
<p>If <code>rslt_source</code> has been set to <code>csv</code>, this parameter should indicate the path to
the result file(s). Otherwise, this parameter can be left as <code>NULL</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will return a list of up to three dataframes:</p><ul><li><p><code>fot_heuristic</code>: a table with the summary heuristic  for each fact type
(month / ((month-1) * .25 +
(month+1) * .25 +
(month-12)*.5))</p></li>
<li><p><code>fot_heuristic_summary</code>: a table with summary values (mean, med, sd, q1, q3) based on
the heuristic</p></li>
<li><p><code>fot_ratios</code>: the <code>fot_results</code> table with an additional column with the
incidence ratio (only returned if <code>row_ratio = TRUE</code>)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># This function should be run after check_fot has been executed for all</span></span></span>
<span class="r-in"><span><span class="co"># network institutions and results have been combined into a common table</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Once the labels have been applied, the function can be executed</span></span></span>
<span class="r-in"><span><span class="co">## When results are kept locally:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_process</span> <span class="op">&lt;-</span> <span class="fu">process_fot</span><span class="op">(</span>fot_results <span class="op">=</span> <span class="va">my_fot_rslts</span>,</span></span>
<span class="r-in"><span>                              target_col <span class="op">=</span> <span class="st">'row_cts'</span>,</span></span>
<span class="r-in"><span>                              rslt_source <span class="op">=</span> <span class="st">'local'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## When results are kept in CSV files:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_process</span> <span class="op">&lt;-</span> <span class="fu">process_fot</span><span class="op">(</span>fot_results <span class="op">=</span> <span class="st">'my_fot_rslts'</span>,</span></span>
<span class="r-in"><span>                              target_col <span class="op">=</span> <span class="st">'row_cts'</span>,</span></span>
<span class="r-in"><span>                              rslt_source <span class="op">=</span> <span class="st">'csv'</span>,</span></span>
<span class="r-in"><span>                              csv_rslt_path <span class="op">=</span> <span class="st">'path/to/my/results'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## When results are kept on a remote database:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_process</span> <span class="op">&lt;-</span> <span class="fu">process_fot</span><span class="op">(</span>fot_results <span class="op">=</span> <span class="st">'my_fot_rslts'</span>,</span></span>
<span class="r-in"><span>                              target_col <span class="op">=</span> <span class="st">'row_cts'</span>,</span></span>
<span class="r-in"><span>                              rslt_source <span class="op">=</span> <span class="st">'remote'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also optionally compute patient incidence ratios. This computation will use</span></span></span>
<span class="r-in"><span><span class="co"># the patient count, regardless of what is specified in the `target_col` argument.</span></span></span>
<span class="r-in"><span><span class="co"># A column with the total patient count for that time period will need to be added to</span></span></span>
<span class="r-in"><span><span class="co"># the results output. It can reflect any patient cohort, so long as the column is called</span></span></span>
<span class="r-in"><span><span class="co"># `total_pt`. We recommend computing the denominator as part of the initial check_fot execution</span></span></span>
<span class="r-in"><span><span class="co"># and extracting the counts from the resulting output.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_process</span> <span class="op">&lt;-</span> <span class="fu">process_fot</span><span class="op">(</span>fot_results <span class="op">=</span> <span class="st">'my_fot_rslts'</span>,</span></span>
<span class="r-in"><span>                              target_col <span class="op">=</span> <span class="st">'row_cts'</span>,</span></span>
<span class="r-in"><span>                              add_ratios <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                              ratio_mult <span class="op">=</span> <span class="fl">10000</span>,</span></span>
<span class="r-in"><span>                              rslt_source <span class="op">=</span> <span class="st">'remote'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

