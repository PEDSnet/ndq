<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clinical Fact Documentation — check_cfd • ndq</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clinical Fact Documentation — check_cfd"><meta name="description" content="This function will identify visits that do not link to the user-specified
facts. It will also compute the counts of patients who have at least one
visit that does not link to the specified fact type."><meta property="og:description" content="This function will identify visits that do not link to the user-specified
facts. It will also compute the counts of patients who have at least one
visit that does not link to the specified fact type."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/database_connection.html">Database Connection &amp; Environment Setup</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clinical Fact Documentation</h1>
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/R/clinical_fact_documentation.R" class="external-link"><code>R/clinical_fact_documentation.R</code></a></small>
      <div class="d-none name"><code>check_cfd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will identify visits that do not link to the user-specified
facts. It will also compute the counts of patients who have at least one
visit that does not link to the specified fact type.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_cfd</span><span class="op">(</span></span>
<span>  <span class="va">cfd_tbl</span>,</span>
<span>  <span class="va">visit_type_filter</span>,</span>
<span>  <span class="va">visit_type_tbl</span>,</span>
<span>  omop_or_pcornet <span class="op">=</span> <span class="st">"omop"</span>,</span>
<span>  visit_tbl <span class="op">=</span> <span class="fu">cdm_tbl</span><span class="op">(</span><span class="st">"visit_occurrence"</span><span class="op">)</span>,</span>
<span>  check_string <span class="op">=</span> <span class="st">"cfd"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cfd-tbl">cfd_tbl<a class="anchor" aria-label="anchor" href="#arg-cfd-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>The primary input table that contains descriptive information about the checks
to be executed by the function. It should include definitions for the clinical fact
types that should be evaluated against the visit_tbl.
see <code>?cfd_input omop</code> or <code><a href="cfd_input_pcornet.html">?cfd_input_pcornet</a></code> for examples of the input structure</p></dd>


<dt id="arg-visit-type-filter">visit_type_filter<a class="anchor" aria-label="anchor" href="#arg-visit-type-filter"></a></dt>
<dd><p><em>string / vector</em> || <strong>required</strong></p>
<p>A string or vector of strings that specifies the visit type(s) the function
should limit to for the analysis (i.e. inpatient, c(inpatient, outpatient)).
If <code>all</code> is included as a visit type, all available visit types will be pulled
from the <code>visit_tbl</code> (not just what was defined in the visit_type_tbl) to capture
the full array of visits.</p></dd>


<dt id="arg-visit-type-tbl">visit_type_tbl<a class="anchor" aria-label="anchor" href="#arg-visit-type-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>A table with mappings that link visit_concept_ids / enc_types to a broader
string descriptor (i.e. inpatient). Multiple rows should be included if
multiple IDs should be mapped to the same string label.</p></dd>


<dt id="arg-omop-or-pcornet">omop_or_pcornet<a class="anchor" aria-label="anchor" href="#arg-omop-or-pcornet"></a></dt>
<dd><p><em>string</em> || defaults to <code>omop</code></p>
<p>A string, either <code>omop</code> or <code>pcornet</code>, indicating the CDM format of the data</p></dd>


<dt id="arg-visit-tbl">visit_tbl<a class="anchor" aria-label="anchor" href="#arg-visit-tbl"></a></dt>
<dd><p><em>tabular input</em> || defaults to <code>cdm_tbl('visit_occurrence')</code></p>
<p>The CDM table with the visits to be used in the analysis. Typically, this will
be either the OMOP <code>visit_occurrence</code> or PCORnet <code>encounter</code> table</p></dd>


<dt id="arg-check-string">check_string<a class="anchor" aria-label="anchor" href="#arg-check-string"></a></dt>
<dd><p><em>string</em> || defaults to <code>cfd</code></p>
<p>An abbreviated identifier that will be used to label all output from this module</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A summary table that, for each provided clinical fact and visit type combination,
will include the count and proportion of visits that are and are not linked to
at least one occurrence of the fact type of interest. It will also include the count
and proportion of patients that are associated with these visits.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create input file with desired checks to be executed</span></span></span>
<span class="r-in"><span><span class="co"># You can access examples for both OMOP &amp; PCORnet here:</span></span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_input_omop.html">cfd_input_omop</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id check_description schema table                filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> pr       procedures        cdm    procedure_occurrence <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> co       conditions        cdm    condition_occurrence <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> dr       drugs             cdm    drug_exposure        <span style="color: #BB0000;">NA</span>          </span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_input_pcornet.html">cfd_input_pcornet</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id check_description         schema table       filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> pr       procedures                cdm    procedures  <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> co       diagnoses                 cdm    diagnosis   <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> rx       prescriptions             cdm    prescribing <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> admin    inpatient administrations cdm    med_admin   <span style="color: #BB0000;">NA</span>          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Next define the visit types to be examined</span></span></span>
<span class="r-in"><span><span class="co"># You can access examples for both OMOP &amp; PCORnet here:</span></span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_visit_types_omop.html">cfd_visit_types_omop</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   visit_type visit_concept_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> inpatient              <span style="text-decoration: underline;">9</span>201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> inpatient        <span style="text-decoration: underline;">2</span>000<span style="text-decoration: underline;">000</span>048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> outpatient             <span style="text-decoration: underline;">9</span>202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> outpatient           <span style="text-decoration: underline;">581</span>399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> emergency              <span style="text-decoration: underline;">9</span>203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> emergency        <span style="text-decoration: underline;">2</span>000<span style="text-decoration: underline;">000</span>048</span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_visit_types_pcornet.html">cfd_visit_types_pcornet</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   visit_type enc_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> inpatient  IP      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> inpatient  EI      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> outpatient AV      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> outpatient TH      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> emergency  ED      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> emergency  EI      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use this as your input to the CFD function</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_cfd_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_cfd</span><span class="op">(</span>cfd_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_input_omop.html">cfd_input_omop</a></span>,</span></span>
<span class="r-in"><span>                         visit_type_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="cfd_visit_types_omop.html">cfd_visit_types_omop</a></span>,</span></span>
<span class="r-in"><span>                         visit_type_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'inpatient'</span>, <span class="st">'outpatient'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                         visit_tbl <span class="op">=</span> <span class="fu">cdm_tbl</span><span class="op">(</span><span class="st">'visit_occurrence'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         check_string <span class="op">=</span> <span class="st">'cfd'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

