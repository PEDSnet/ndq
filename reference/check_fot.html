<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Facts Over Time — check_fot • ndq</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Facts Over Time — check_fot"><meta name="description" content="This function will compute the number of rows, patients, and (optionally) visits associated with
the fact of interest within a specified time period. The user will supply the end points of the time span
(i.e. January 2009 - January 2024) and the time period they wish to divide it by (i.e. month, year)."><meta property="og:description" content="This function will compute the number of rows, patients, and (optionally) visits associated with
the fact of interest within a specified time period. The user will supply the end points of the time span
(i.e. January 2009 - January 2024) and the time period they wish to divide it by (i.e. month, year)."><meta property="og:image" content="https://pedsnet.github.io/ndq/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/database_connection.html">Database Connection &amp; Environment Setup</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Facts Over Time</h1>
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/R/facts_over_time.R" class="external-link"><code>R/facts_over_time.R</code></a></small>
      <div class="d-none name"><code>check_fot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will compute the number of rows, patients, and (optionally) visits associated with
the fact of interest within a specified time period. The user will supply the end points of the time span
(i.e. January 2009 - January 2024) and the time period they wish to divide it by (i.e. month, year).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_fot</span><span class="op">(</span></span>
<span>  <span class="va">fot_tbl</span>,</span>
<span>  omop_or_pcornet <span class="op">=</span> <span class="st">"omop"</span>,</span>
<span>  compute_method <span class="op">=</span> <span class="st">"loop"</span>,</span>
<span>  time_span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"2009-01-01"</span>, <span class="fu">today</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  time_period <span class="op">=</span> <span class="st">"month"</span>,</span>
<span>  lookback_interval <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  check_string <span class="op">=</span> <span class="st">"fot"</span>,</span>
<span>  visits_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  distinct_visits <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fot-tbl">fot_tbl<a class="anchor" aria-label="anchor" href="#arg-fot-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>The primary input table that contains descriptive information about the checks
to be executed by the function. It should include definitions for the clinical fact
types that should be evaluated across the user-specified time span per each time period.
see <code><a href="fot_input_omop.html">?fot_input_omop</a></code> or <code><a href="fot_input_pcornet.html">?fot_input_pcornet</a></code> for examples of the input structure</p></dd>


<dt id="arg-omop-or-pcornet">omop_or_pcornet<a class="anchor" aria-label="anchor" href="#arg-omop-or-pcornet"></a></dt>
<dd><p><em>string</em> || defaults to <code>omop</code></p>
<p>A string, either <code>omop</code> or <code>pcornet</code>, indicating the CDM format of the data</p></dd>


<dt id="arg-compute-method">compute_method<a class="anchor" aria-label="anchor" href="#arg-compute-method"></a></dt>
<dd><p><em>string</em> || defaults to <code>loop</code></p>
<p>A string, either <code>loop</code> or <code>group</code>, that controls whether the
check is executed by looping through each time period or grouping by a date field to
obtain counts. <code>group</code> is recommended for high performing database systems.</p></dd>


<dt id="arg-time-span">time_span<a class="anchor" aria-label="anchor" href="#arg-time-span"></a></dt>
<dd><p><em>list (length 2)</em> || defaults to <code>list('2009-01-01', today())</code></p>
<p>A list that contains the start date and end date of the total time period of interest</p></dd>


<dt id="arg-time-period">time_period<a class="anchor" aria-label="anchor" href="#arg-time-period"></a></dt>
<dd><p><em>string</em> || defaults to <code>month</code></p>
<p>A string indicating the length of each time period that should be examined, like months or years</p></dd>


<dt id="arg-lookback-interval">lookback_interval<a class="anchor" aria-label="anchor" href="#arg-lookback-interval"></a></dt>
<dd><p><em>integer</em> || defaults to <code>1</code></p>
<p>An integer indicating the number of time periods (defined in <code>time_period</code>) to look back in each interval.
For example, a <code>time_period</code> of <code>month</code> and a <code>lookback_interval</code> of <code>3</code> would produce quarterly counts.</p></dd>


<dt id="arg-check-string">check_string<a class="anchor" aria-label="anchor" href="#arg-check-string"></a></dt>
<dd><p><em>string</em> || defaults to <code>fot</code></p>
<p>An abbreviated identifier that will be used to label all output from this module</p></dd>


<dt id="arg-visits-only">visits_only<a class="anchor" aria-label="anchor" href="#arg-visits-only"></a></dt>
<dd><p><em>boolean</em> || defaults to FALSE</p>
<p>If set to <code>TRUE</code>, then this function will only return visit counts and will not return patient
or row counts. By default, visit, row, and patient counts are returned.</p></dd>


<dt id="arg-distinct-visits">distinct_visits<a class="anchor" aria-label="anchor" href="#arg-distinct-visits"></a></dt>
<dd><p><em>boolean</em> || defaults to TRUE</p>
<p>If set to <code>FALSE</code>, then this function will only return patient and row counts and will not return
visit counts. By default, visit, row, and patient counts are returned.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will return a dataframe with one row for each time period within the
specified time span for each check. Additionally:</p><ul><li><p>If <code>visits_only = TRUE</code>, only visit counts will be returned for the check + time period</p></li>
<li><p>If <code>visits_only = FALSE</code> and <code>distinct_visits = TRUE</code>, patient, row, and visit counts will be returned for the check + time period</p></li>
<li><p>If <code>visits_only = FALSE</code> and <code>distinct_visits = FALSE</code>, only patient and row counts will be returned for the check + time period</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create input file with desired checks to be executed</span></span></span>
<span class="r-in"><span><span class="co"># You can access examples for both OMOP &amp; PCORnet here:</span></span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="fot_input_omop.html">fot_input_omop</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 22 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    check_id  check_description              schema table date_field filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> vi        all visits                     cdm    visi… visit_sta… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> vo_office outpatient visits              cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> vo_labs   outpatient lab visits          cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> vo_th     telehealth visits              cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> vo_oa     other ambulatory visits        cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> vip       inpatient visits (9201 or 200… cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ved       emergency department visits    cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> vob       observation visits             cdm    visi… visit_sta… visit_conce…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> co        all conditions                 cdm    cond… condition… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> dp        prescription drugs             cdm    drug… drug_expo… drug_type_c…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 12 more rows</span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="fot_input_pcornet.html">fot_input_pcornet</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 21 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    check_id  check_description              schema table date_field filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> vi        all visits                     cdm    enco… admit_date <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> vo_office outpatient visits              cdm    enco… admit_date enc_type ==…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> vo_th     telehealth visits              cdm    enco… admit_date enc_type ==…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> vo_oa     other ambulatory visits        cdm    enco… admit_date enc_type ==…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> vip       inpatient visits (9201 or 200… cdm    enco… admit_date enc_type %i…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ved       emergency department visits    cdm    enco… admit_date enc_type ==…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> vob       observation visits             cdm    enco… admit_date enc_type ==…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> co        all diagnoses                  cdm    diag… admit_date <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> dp        prescription drugs             cdm    pres… rx_start_… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ip        inpatient administration drugs cdm    med_… medadmin_… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use this as your input to the FOT function</span></span></span>
<span class="r-in"><span><span class="co">## This check can be executed for different time period lengths, like...</span></span></span>
<span class="r-in"><span><span class="co">### Yearly</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_fot</span><span class="op">(</span>fot_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="fot_input_omop.html">fot_input_omop</a></span>,</span></span>
<span class="r-in"><span>                         omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                         compute_method <span class="op">=</span> <span class="st">'loop'</span>, <span class="co"># use 'group' for high performant DBMSs</span></span></span>
<span class="r-in"><span>                         time_span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'2015-01-01'</span>, <span class="st">'2025-01-01'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         time_period <span class="op">=</span> <span class="st">'year'</span>,</span></span>
<span class="r-in"><span>                         lookback_interval <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                         check_string <span class="op">=</span> <span class="st">'fot'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Monthly</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_fot</span><span class="op">(</span>fot_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="fot_input_omop.html">fot_input_omop</a></span>,</span></span>
<span class="r-in"><span>                         omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                         compute_method <span class="op">=</span> <span class="st">'loop'</span>, <span class="co"># use 'group' for high performant DBMSs</span></span></span>
<span class="r-in"><span>                         time_span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'2015-01-01'</span>, <span class="st">'2025-01-01'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         time_period <span class="op">=</span> <span class="st">'month'</span>,</span></span>
<span class="r-in"><span>                         lookback_interval <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                         check_string <span class="op">=</span> <span class="st">'fot'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Quarterly</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_fot_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_fot</span><span class="op">(</span>fot_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="fot_input_omop.html">fot_input_omop</a></span>,</span></span>
<span class="r-in"><span>                         omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                         compute_method <span class="op">=</span> <span class="st">'loop'</span>, <span class="co"># use 'group' for high performant DBMSs</span></span></span>
<span class="r-in"><span>                         time_span <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">'2015-01-01'</span>, <span class="st">'2025-01-01'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         time_period <span class="op">=</span> <span class="st">'month'</span>,</span></span>
<span class="r-in"><span>                         lookback_interval <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                         check_string <span class="op">=</span> <span class="st">'fot'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

