<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Vocabulary Conformance — check_vc • ndq</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vocabulary Conformance — check_vc"><meta name="description" content="This function will use a provided table with concept to vocabulary mappings to
identify the vocabulary of each concept and determine how many rows comply with
the standard vocabularies expected for that field and how many rows violate these expectations."><meta property="og:description" content="This function will use a provided table with concept to vocabulary mappings to
identify the vocabulary of each concept and determine how many rows comply with
the standard vocabularies expected for that field and how many rows violate these expectations."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/database_connection.html">Database Connection &amp; Environment Setup</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Vocabulary Conformance</h1>
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/R/vocabulary_conformance.R" class="external-link"><code>R/vocabulary_conformance.R</code></a></small>
      <div class="d-none name"><code>check_vc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will use a provided table with concept to vocabulary mappings to
identify the vocabulary of each concept and determine how many rows comply with
the standard vocabularies expected for that field and how many rows violate these expectations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_vc</span><span class="op">(</span></span>
<span>  <span class="va">vc_tbl</span>,</span>
<span>  omop_or_pcornet <span class="op">=</span> <span class="st">"omop"</span>,</span>
<span>  check_string <span class="op">=</span> <span class="st">"vc"</span>,</span>
<span>  concept_tbl <span class="op">=</span> <span class="fu">vocabulary_tbl</span><span class="op">(</span><span class="st">"concept"</span><span class="op">)</span>,</span>
<span>  null_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44814650L</span>, <span class="fl">0L</span>, <span class="fl">44814653L</span>, <span class="fl">44814649L</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-vc-tbl">vc_tbl<a class="anchor" aria-label="anchor" href="#arg-vc-tbl"></a></dt>
<dd><p><em>tabular input</em> || <strong>required</strong></p>
<p>The primary input table that contains descriptive information about the checks
to be executed by the function. It should include definitions for database table fields and
the expected vocabularies for that field.
see <code><a href="vc_input_omop.html">?vc_input_omop</a></code> or <code><a href="vc_input_pcornet.html">?vc_input_pcornet</a></code> for examples of the input structure</p></dd>


<dt id="arg-omop-or-pcornet">omop_or_pcornet<a class="anchor" aria-label="anchor" href="#arg-omop-or-pcornet"></a></dt>
<dd><p>somop_or_pcornet <em>string</em> || defaults to <code>omop</code></p>
<p>A string, either <code>omop</code> or <code>pcornet</code>, indicating the CDM format of the data</p></dd>


<dt id="arg-check-string">check_string<a class="anchor" aria-label="anchor" href="#arg-check-string"></a></dt>
<dd><p><em>string</em> || defaults to <code>vc</code></p>
<p>An abbreviated identifier that will be used to label all output from this module</p></dd>


<dt id="arg-concept-tbl">concept_tbl<a class="anchor" aria-label="anchor" href="#arg-concept-tbl"></a></dt>
<dd><p><em>tabular input</em> || defaults to <code>vocabulary_tbl('concept')</code></p>
<p>A vocabulary table with concept definitions (for example, the OHDSI concept table) that includes
the vocabulary to which the concept belongs. This table should at a minimum have the columns:
<code>concept_id</code>, <code>concept_name</code>, <code>vocabulary_id</code></p></dd>


<dt id="arg-null-values">null_values<a class="anchor" aria-label="anchor" href="#arg-null-values"></a></dt>
<dd><p><em>string / vector</em> || defaults to 44814650, 0, 44814653, &amp; 44814649</p>
<p>A string or vector listing the concept(s) that indicate a NULL value, which will be
excluding when assessing for the presence of vocabularies not accepted in the field.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function will return a table with summary information about each vocabulary that
appears in the field, with violations marked in a T/F field. These summaries are computed at
both the row and concept levels. This is to account for any cases where a large quantity of rows are
in violation of the acceptable vocabularies, but it is made up of only 1-2 distinct concepts.</p>
<p>Note that vocabularies associated with the indicated <code>null_values</code> are ignored, so proportions may
not add up to 1 as a result.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create input file with desired checks to be executed</span></span></span>
<span class="r-in"><span><span class="co"># You can access examples for both OMOP &amp; PCORnet here:</span></span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="vc_input_omop.html">vc_input_omop</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id     schema table    acceptable_vocabular…¹ concept_field filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> pr_cid       cdm    procedu… ICD10CM,CPT4,ICD9CM,I… procedure_co… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> co_cscid     cdm    conditi… ICD9,ICD9CM,ICD10,ICD… condition_so… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> im_dose      cdm    immuniz… UCUM                   imm_dose_uni… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> dt_cause_cid cdm    death    SNOMED, OMOP Extension cause_concep… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> co_cid       cdm    conditi… SNOMED,OMOP Extension  condition_co… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> dr_cid       cdm    drug_ex… RxNorm, RxNorm Extens… drug_concept… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> im_cid       cdm    immuniz… CVX                    immunization… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> dr_dose      cdm    drug_ex… UCUM                   dose_unit_co… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span> pr_pscid     cdm    procedu… ICD10CM,CPT4,ICD9CM,I… procedure_so… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​acceptable_vocabularies</span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="vc_input_pcornet.html">vc_input_pcornet</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 7 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id     schema table    acceptable_vocabular…¹ concept_field filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> pr_cid       cdm    procedu… ICD10CM,CPT4,ICD9CM,I… px            <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> im_dose      cdm    immuniz… UCUM                   vx_dose_unit  <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> dt_cause_cid cdm    death    SNOMED, OMOP Extension cause_concep… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> co_cid       cdm    diagnos… SNOMED,ICD9,ICD9CM,IC… dx            <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> dr_cid       cdm    prescri… RxNorm, RxNorm Extens… rxnorm_cui    <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> im_cid       cdm    immuniz… CVX,NDC,CPT4,HCPCS,Rx… vx_code       <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> dr_dose      cdm    prescri… UCUM                   rx_dose_orde… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​acceptable_vocabularies</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use this as your input to the vc function</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_vc_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_vc</span><span class="op">(</span>vc_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="vc_input_omop.html">vc_input_omop</a></span>,</span></span>
<span class="r-in"><span>                       omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                       concept_tbl <span class="op">=</span> <span class="fu">vocabulary_tbl</span><span class="op">(</span><span class="st">"concept"</span><span class="op">)</span>, <span class="co">## points to OHDSI concept table</span></span></span>
<span class="r-in"><span>                       null_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44814650L</span>,<span class="fl">0L</span>,</span></span>
<span class="r-in"><span>                                       <span class="fl">44814653L</span>,<span class="fl">44814649L</span><span class="op">)</span>, <span class="co">## ignored illegal vocabs</span></span></span>
<span class="r-in"><span>                       check_string <span class="op">=</span> <span class="st">'vc'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

