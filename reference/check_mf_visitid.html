<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Missing Field: Visit ID — check_mf_visitid • ndq</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Missing Field: Visit ID — check_mf_visitid"><meta name="description" content="This function will check to see if the visit_occurrence_id/encounterid in a given fact table
also exists in the visit_occurrence/encoubter table and identify cases where the visit_occurrence_id/encounterid
is missing entirely (NULL). There may be cases where this is expected
(for example, immunizations imported from an external registry) but generally the
visit_occurrence_id/encounterid should be populated and exist as a primary key in the
visit_occurrence/encounter table."><meta property="og:description" content="This function will check to see if the visit_occurrence_id/encounterid in a given fact table
also exists in the visit_occurrence/encoubter table and identify cases where the visit_occurrence_id/encounterid
is missing entirely (NULL). There may be cases where this is expected
(for example, immunizations imported from an external registry) but generally the
visit_occurrence_id/encounterid should be populated and exist as a primary key in the
visit_occurrence/encounter table."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Missing Field: Visit ID</h1>
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/R/mf_visit_id.R" class="external-link"><code>R/mf_visit_id.R</code></a></small>
      <div class="d-none name"><code>check_mf_visitid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will check to see if the visit_occurrence_id/encounterid in a given fact table
also exists in the visit_occurrence/encoubter table and identify cases where the visit_occurrence_id/encounterid
is missing entirely (NULL). There may be cases where this is expected
(for example, immunizations imported from an external registry) but generally the
visit_occurrence_id/encounterid should be populated and exist as a primary key in the
visit_occurrence/encounter table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_mf_visitid</span><span class="op">(</span></span>
<span>  <span class="va">mf_tbl</span>,</span>
<span>  omop_or_pcornet <span class="op">=</span> <span class="st">"omop"</span>,</span>
<span>  visit_tbl <span class="op">=</span> <span class="fu">cdm_tbl</span><span class="op">(</span><span class="st">"visit_occurrence"</span><span class="op">)</span>,</span>
<span>  check_string <span class="op">=</span> <span class="st">"mf_visitid"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mf-tbl">mf_tbl<a class="anchor" aria-label="anchor" href="#arg-mf-tbl"></a></dt>
<dd><p>a table with information about the tables that should be cross
checked against the visit_tbl to ensure the visit_occurrence_id / encounterid
exists as a primary key</p></dd>


<dt id="arg-omop-or-pcornet">omop_or_pcornet<a class="anchor" aria-label="anchor" href="#arg-omop-or-pcornet"></a></dt>
<dd><p>string indicating the CDM format of the data; defaults to <code>omop</code></p></dd>


<dt id="arg-visit-tbl">visit_tbl<a class="anchor" aria-label="anchor" href="#arg-visit-tbl"></a></dt>
<dd><p>the CDM visit_occurrence / encounter table that contains the visit ID primary key</p></dd>


<dt id="arg-check-string">check_string<a class="anchor" aria-label="anchor" href="#arg-check-string"></a></dt>
<dd><p>an abbreviated identifier to identify all output from this module
defaults to <code>mf_visitid</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a table summarizing the total number of visits in the fact table, the number of NULL visits,
and the number of visits that cannot link back to the visit table. has columns: measure,
total_visits, missing_visits_total, missing_visits_distinct, visit_na, total_id, check_name,
database_version,site</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create input file with desired checks to be executed</span></span></span>
<span class="r-in"><span><span class="co"># You can access examples for both OMOP &amp; PCORnet here:</span></span></span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="mf_input_omop.html">mf_input_omop</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id check_description                 schema table           filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> coied    conditions excluding problem list cdm    condition_occu… !condition_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dr       all drugs                         cdm    drug_exposure   <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> dp       prescription or inpatient drugs   cdm    drug_exposure   !drug_type_…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> pr       all procedures                    cdm    procedure_occu… <span style="color: #BB0000;">NA</span>          </span>
<span class="r-in"><span><span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="mf_input_pcornet.html">mf_input_pcornet</a></span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 4 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   check_id check_description                 schema table       filter_logic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> coied    conditions excluding problem list cdm    diagnosis   <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> admin    inpatient administrations         cdm    med_admin   <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> rx       prescription                      cdm    prescribing <span style="color: #BB0000;">NA</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> pr       all procedures                    cdm    procedures  <span style="color: #BB0000;">NA</span>          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use this as your input to the MF: Visit ID function</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">my_mf_rslt</span> <span class="op">&lt;-</span> <span class="fu">check_mf</span><span class="op">(</span>mf_tbl <span class="op">=</span> <span class="fu">ndq</span><span class="fu">::</span><span class="va"><a href="mf_input_omop.html">mf_input_omop</a></span>,</span></span>
<span class="r-in"><span>                       omop_or_pcornet <span class="op">=</span> <span class="st">'omop'</span>,</span></span>
<span class="r-in"><span>                       visit_tbl <span class="op">=</span> <span class="fu">cdm_tbl</span><span class="op">(</span><span class="st">'visit_occurrence'</span><span class="op">)</span>, <span class="co">## table with visit ID primary keys</span></span></span>
<span class="r-in"><span>                       check_string <span class="op">=</span> <span class="st">'mf_visitid'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

