<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Database Connection &amp; Environment Setup â€¢ ndq</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Database Connection &amp; Environment Setup">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ndq</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/database_connection.html">Database Connection &amp; Environment Setup</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PEDSnet/ndq/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Database Connection &amp; Environment Setup</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PEDSnet/ndq/blob/main/vignettes/database_connection.Rmd" class="external-link"><code>vignettes/database_connection.Rmd</code></a></small>
      <div class="d-none name"><code>database_connection.Rmd</code></div>
    </div>

    
    
<p>The NDQ package utilizes the <code>argos</code> system for
interacting with data and accessing remote databases. To best utilize
this tool, you will need to set up your environment to comply with the
<code>argos</code> standards. Read more about the argos package and what
is required for environment setup <a href="https://github.com/PEDSnet/argos" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="connecting-to-your-cdm">Connecting to your CDM<a class="anchor" aria-label="anchor" href="#connecting-to-your-cdm"></a>
</h2>
<p>The primary configuration in <code>argos</code> required to establish
a database connection is <code>config('db_src')</code>. You can set this
environment variable in one of two ways:</p>
<div class="section level4">
<h4 id="option-1-dbi-or-similar">Option 1: DBI (or similar)<a class="anchor" aria-label="anchor" href="#option-1-dbi-or-similar"></a>
</h4>
<p>One option is to create a connection object inside your R session
using <code>DBI</code> or a similar database connection package.
Instructions for how to use <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect</a></code> to establish a
connection can be found in <a href="https://dbi.r-dbi.org/articles/DBI.html" class="external-link">the DBI package
documentation</a>.</p>
<p>If this option is used, you can set your environment variable as
<code>config('db_src', myDBIobject)</code></p>
</div>
<div class="section level4">
<h4 id="option-2-external-json-configuration">Option 2: External JSON Configuration<a class="anchor" aria-label="anchor" href="#option-2-external-json-configuration"></a>
</h4>
<p>Another option is to store your configuration details in a local JSON
file and feed path to that file into <code>srcr</code>. We have provided
a simple example below. As with Option 1, the type of information that
would be included in the file differs for different database
backends.</p>
<pre><code>{
    "src_name" : "Postgres",
    "src_args" : {
            "host"     : "my.database.server",
            "port"     : 5432,
            "dbname"   : "project_db",
            "username" : "my_username",
            "password" : "my_password",
            "options"  : "-c search_path=my_cdm_schema"
     },
     "post_connect_sql" : [
         "set role project_staff;"
     ]
     
}
</code></pre>
<p>If this option is used, you can set your environment variable as
<code>config('db_src', srcr('path/to/my/file'))</code></p>
</div>
</div>
<div class="section level2">
<h2 id="custom-configuration">Custom Configuration<a class="anchor" aria-label="anchor" href="#custom-configuration"></a>
</h2>
<p>The NDQ package also utilizes a custom environment variable,
<code>config('qry_site')</code>, required only by this package and not
<code>argos</code> as a whole. You should set it to the name of the
institution for which you are executing the function(s), like
<code>config('qry_site', 'my_institution')</code>.</p>
<p>This configuration will ensure that, when applicable, only
information from one institution is being read during the execution of
each <code>check_*</code> function. This is done to improve performance
and reduce the amount of data that is being processed at once. If you
would like to execute these functions for multiple institutions, simply
change the variable to another institution and re-execute the analysis.
The <code>process_*</code> functions can be used to compute overall
information based on the combined results of each execution.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hanieh Razzaghi, Kimberley Dickinson, Kaleigh Wieand, Charles Bailey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
